# Способы модификации блока

В БЭМ-методологии блоки — это универсальные, повторно используемые компоненты страницы. Одни и те же блоки используются в разных проектах. Чтобы проекты не были одинаковыми, блоки можно изменять различными способами:

* [Модификатором](#Изменение-блока-модификатором)
* [Миксом](#Изменение-блока-миксом)
* [Уровнем переопределения](#Изменение-блока-уровнем-переопределения)
* [Контекстом](#Изменение-блока-контекстом)

Изменение блока любым из перечисленных выше способов не требует:

* копировать код блока для внесения изменений;
* изменять исходную реализацию блока;
* создавать новый блок на основе существующего.

## Изменение блока модификатором

Изменение блока производится при помощи установки/снятия модификатора, код которого описывает изменения. Блоку можно добавлять одновременно [несколько модификаторов](#Добавление-нескольких-модификаторов).

Модификатор может задавать блоку:

* [внешний вид](#Изменение-внешнего-вида-блока)
* [поведение](#Изменение-поведения-блока)
* [состояние](#Булевый-модификатор)
* [структуру](#Изменение-структуры-блока)

### Когда использовать модификатор

Создавайте модификатор, если:
* необходимо повлиять на один конкретный блок, а не на все одноименные блоки в проекте (как при изменении с помощью [уровня переопределения](#Изменение-блока-уровнем-переопределения));
* необходимо изменить состояние той же самой сущности, а не аспект другой (как при изменении с помощью [микса](#Изменение-блока-миксом)).

### Примеры

Рассмотрим изменение блока с помощью модификатора на примере блока `popup`.

HTML-реализация:

```html
    <!-- Блок popup -->
    <div class="popup">...</div>
```

Отображение:

![Transparent popup](https://github.com/innabelaya/bem-docs/blob/master/pics/block-modification/popup_default.png?raw=true)

#### Изменение внешнего вида блока 

Модификатор `theme` в значении `sun` задает желтый фон всплывающему окну.

HTML-реализация:

```html
    <!-- Блок popup с модификатором theme в значении sun-->
    <div class="popup popup_theme_sun">...</div>
```

Отображение:

![Yellow background modifier for popup block](https://github.com/innabelaya/bem-docs/blob/master/pics/block-modification/popup_theme_sun.png?raw=true)

#### Изменение поведения блока

Модификатор `direction` отвечает за направление открытия всплывающего окна.

Например, модификатор `direction` в значении `left` открывает всплывающее влево.

HTML-реализация:

```html
    <!-- Блок popup -->
    <div class="popup popup_direction_left">...</div>
```

Отображение:

![Left direction modifier for popup block](https://github.com/innabelaya/bem-docs/blob/master/pics/block-modification/popup_left.png?raw=true)

Модификатор `direction` в значении `bottom` открывает всплывающее окно вниз.

HTML-реализация:

```html
    <!-- Блок popup -->
    <div class="popup popup_direction_bottom">...</div>
```

Отображение:

![Bottom direction modifier for popup block](https://github.com/innabelaya/bem-docs/blob/master/pics/block-modification/popup_bottom.png?raw=true)

#### Изменение структуры блока

Модификатор `has-tail` в значении `true` добавляет блоку `popup` новый элемент — «хвостик». Также модификатор добавляет отступы блоку, освобождая место для хвостика.

HTML-реализация:

```html
    <!-- Блок popup -->
    <div class="popup popup_has-tail">...</div>
```

![Modifier for adding tail element to popup](https://github.com/innabelaya/bem-docs/blob/master/pics/block-modification/popup__tail_1.png?raw=true)

#### Добавление нескольких модификаторов 

Блоку можно добавлять неограниченное количество модификаторов. Например:

* `theme` в значении `sun`;
* `direction` в значении `bottom`. 

HTML-реализация:

```html
    <!-- Блок popup -->
    <div class="popup popup_theme_sun popup_direction_bottom">...</div>
```

Всплывающее окно откроется вниз и будет иметь желтый фон:

![Bottom direction modifier for yellow popup block](https://github.com/innabelaya/bem-docs/blob/master/pics/block-modification/popup_bottom_theme_sun.png?raw=true)

## Изменение блока миксом

Изменение блока производится при помощи размещения дополнительных БЭМ-сущностей на одном DOM-узле с блоком. [Миксы](../method/key-concepts.ru.md#Микс) позволяют совмещать поведение и стили нескольких сущностей без дублирования кода.

### Когда использовать микс
 
В большинстве случаев микс используется, если необходимо:

* [задать внешнюю геометрию блока](#Внешняя-геометрия-и-позиционирование)
* [одинаково стилизовать разные HTML-элементы](#Стилизация-групп-блоков)

### Примеры

#### Внешняя геометрия и позиционирование

В БЭМ-методологии стили, отвечающие за внешнюю геометрию и позиционирование, задаются через родительский блок.

HTML-реализация:

```html
<!-- Блок `header` -->
<header class="header">
    <button class="button header__button">...</button>
</header>
```

CSS-реализация кнопки:

```css
.button {
    font-family: Arial, sans-serif;
    text-align: center;
    border: 1px solid black;    /* Рамка */
}
.header__button {
    margin: 30px;               /* Отступ */
    position: relative;
}
```

В данном примере внешняя геометрия и позиционирование блока `button` задана через элемент `header__button`. Блок `button` ничего не знает про отступы и может использоваться повторно в любом месте.

HTML-реализация:

```html
<!-- Блок `footer` -->
<footer class="footer">
    <button class="button">...</button>
</footer>
```

#### Стилизация групп блоков

Иногда необходимо применить одинаковую стилизацию сразу к нескольким различным HTML-элементам страницы. 
В БЭМ для того, чтобы единообразно стилизовать набор HTML-элементов, используются миксы. 

В примере ниже блок `text` содержит все правила для стилизации блоков `article` и `copyright`.

CSS-реализация:

```css
.text {
    font-family: Arial, sans-serif;
    font-size: 14px;
    color: #000;
}
```

Чтобы изменить стили блоков `article` и `copyright`, достаточно примиксовать им блок `text`.

HTML-реализация:

```html
<article class="article text">...</article>

<footer class="footer">
    <div class="copyright text">...</div>
</footer>
```

## Изменение блока уровнем переопределения

Изменение блока производится при помощи объединения свойств блока с разных уровней переопределения. Изменения блока описываются на отдельном уровне и подключаются при сборке. 

> Подробнее о [принципах работы уровней переопределения](../redefinition-level/redefinition-level.ru.md)

### Когда использовать уровни переопределения

Используйте уровни переопределения, если необходимо изменить все одноименные блоки проекта.

Примеры наиболее распространенных случаев использования уровней.

### Пример

Универсальные блоки из библиотеки должны выглядеть в разных проектах по-разному. Для этого достаточно подключить библиотеку в проект как отдельный уровень и описать изменения блока на другом уровне переопределения.

Исходная реализация блока `button` в библиотеке:

![Исходная реализация кнопки](https://github.com/innabelaya/bem-docs/blob/master/pics/redefinition-level/button-default.png)

Добавим кнопке тень. Для этого доопределим CSS-правила блока `button` на уровне проекта (`project.blocks`).

Файловая структура с новыми правилами для кнопки (`button.css`) на уровне `project.blocks`:

```files
project/
    library.blocks/
        button/
            button.css    # исходная CSS-реализация кнопки в библиотеке

    project.blocks/
        button/
            button.css    # переопределение на уровне проекта
```

В результате для блока `button` применятся правила с обоих уровней переопределения:

```css
@import "library.blocks/button/button.css";   /* Исходные CSS-правила с уровня библиотеки */
@import "project.blocks/button/button.css";   /* Особенности с уровня project.blocks */
```

Новый внешний вид кнопки:

![Кнопка с тенью](https://github.com/innabelaya/bem-docs/blob/master/pics/block-modification/button-shadow.png)

> [Больше примеров применения уровней переопределения](../redefinition-level/redefinition-level.ru.md#Примеры-использования)

## Изменение блока контекстом

Изменение блока производится при помощи размещения одного блока в составе другого. Правила внешнего блока влияют на правила внутреннего.

### Когда использовать контекст

В основном используется для стилизации элементов в зависимости от модификатора родительского блока.

> **Важно** Изменять внешний вид и поведение блока контекстом следует только в том случае, если по какой-то причине невозможно использовать микс. Изменения с помощью контекста ограничивают независимость блоков.
 
### Пример

Иногда необходимо определить стили для блока заранее. Например, когда предварительно неизвестно, какое содержимое будет иметь вложенный блок. В таком случае в родительском блоке указываются все правила, которые применяются каскадом к вложенным блокам. 
Самый распространенный случай использования контекста для стилизации блока — реализация блоков для комментариев в блогах или форумах любой CMS системы. 

